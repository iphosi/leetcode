{"root":{"data":{"id":"d3r7mxs2zq80","created":1724814289412,"text":"技术细节整理","expandState":"expand"},"children":[{"data":{"id":"d3s2145tpsw0","created":1724900033699,"text":"Transformer","layout_mind_offset":{"x":116.9999997913838,"y":-429.99999901652336}},"children":[{"data":{"id":"d3raod9g8dk0","created":1724822864808,"text":"为什么 qk 点积要除以根号 d","expandState":"expand","layout_mind_offset":{"x":306,"y":7},"layout_right_offset":{"x":16,"y":-62}},"children":[{"data":{"id":"d3rapzck3fk0","created":1724822991249,"text":"d 增大导致 qk 点积的方差增大","layout_right_offset":{"x":-2,"y":-22}},"children":[]},{"data":{"id":"d3s2pchqoio0","created":1724901932574,"text":"假设 qi 与 ki 互相独立，均值为 0，方差为 1，qk 点积除以根号 d 可使点积方差为 1"},"children":[]},{"data":{"id":"d3s2u6n4tnk0","created":1724902311660,"text":"防止 softmax 输出分布过于尖锐导致梯度消失"},"children":[]}]},{"data":{"id":"d3s2zf65pg80","created":1724902722046,"text":"为什么使用 LayerNorm","layout_right_offset":{"x":22,"y":-39}},"children":[{"data":{"id":"d3s33bijfi00","created":1724903027544,"text":"稳定输入分布，防止梯度消失"},"children":[]}]},{"data":{"id":"d3s35xwwaio0","created":1724903233029,"text":"为什么不用 BatchNorm"},"children":[{"data":{"id":"d3s364gbdiw0","created":1724903247264,"text":"需要较大的 Batch Size 才能准确估计均值和方差"},"children":[]},{"data":{"id":"d3s388mq6200","created":1724903413087,"text":"预测时采用训练时计算的均值和方差，需要保证训练数据与测试数据分布一致，泛化能力有限"},"children":[]},{"data":{"id":"d3s3blz8hi80","created":1724903677234,"text":"文本数据长度不一，Batch 中的 Pad Token 会干扰 BatchNorm"},"children":[]}]},{"data":{"id":"d3zw6vdz2yw0","created":1725696037780,"text":"Pre Norm 与 Post Norm 比较","layout_right_offset":{"x":8.99999986588955,"y":37.999999433755875}},"children":[{"data":{"id":"d3zw9nih4gg0","created":1725696255730,"text":"Post Norm 破坏了残差结构，可能导致梯度消失","layout_right_offset":{"x":0.9999999850988388,"y":9.999999850988274}},"children":[]},{"data":{"id":"d3zwcf2skog0","created":1725696472460,"text":"Pre Norm 降低了模型的等效深度"},"children":[]},{"data":{"id":"d3zwh5rgxbs0","created":1725696844005,"text":"Deep Norm 对残差项乘上一个放大系数"},"children":[]},{"data":{"id":"d3zwkiq00c00","created":1725697107307,"text":"RMS Norm 对输入进行 L2 归一化"},"children":[{"data":{"id":"d3zwzoi1pow0","created":1725698295349,"text":"可以在梯度下降时令损失更加平滑"},"children":[]}]}]}]},{"data":{"id":"d3s9o42wzc00","created":1724921583668,"text":"Flash Attention","layout_mind_offset":{"x":23,"y":-281}},"children":[{"data":{"id":"d3vovsjf9q80","created":1725269181977,"text":"降低存储访问开销（Memory Access Cost，MAC）"},"children":[{"data":{"id":"d3vp0lbh8go0","created":1725269558080,"text":"矩阵分块送入 SRAM (Static Random-Access Memory)，减少对 HBM (High Bandwidth Memory) 的读写"},"children":[]}]}]},{"data":{"id":"d3svrq5evds0","created":1724983931219,"text":"DeepSpeed","layout_mind_offset":{"x":35,"y":-229}},"children":[]},{"data":{"id":"d3s9obw7gog0","created":1724921600677,"text":"vLLM","layout_mind_offset":{"x":61,"y":-199}},"children":[{"data":{"id":"d3s9oq7twbk0","created":1724921631855,"text":"Paged Attention"},"children":[{"data":{"id":"d3xfi30zyn40","created":1725445837634,"text":"在常规的推理框架中，当我们的服务接收到一条请求时，它会为这条请求中的prompts分配 gpu 显存空间。由于推理所生成的序列长度未知，所以大部分框架会按照 (batch_size, max_seq_len) 这样的固定尺寸，在gpu显存上预先为一条请求开辟一块连续的矩形存储空间。","layout_right_offset":{"x":81,"y":-81}},"children":[]},{"data":{"id":"d3xfrzw6omw0","created":1725446614454,"text":"虚拟连续空间映射物理非连续空间","layout_right_offset":{"x":66,"y":2}},"children":[]}]}]},{"data":{"id":"d3s9oyk4o680","created":1724921650013,"text":"RAG","layout_mind_offset":{"x":137.99999952316284,"y":-138.999999076128}},"children":[{"data":{"id":"d3sc5uosfy00","created":1724928615998,"text":"搜索索引","layout_right_offset":{"x":92,"y":-23}},"children":[{"data":{"id":"d3sc637yxu00","created":1724928634572,"text":"向量存储索引","layout_right_offset":{"x":49,"y":-25}},"children":[]}]},{"data":{"id":"d3sc6qbpbuw0","created":1724928684864,"text":"层次索引","layout_right_offset":{"x":105,"y":18}},"children":[{"data":{"id":"d3sc733u3c00","created":1724928712686,"text":"首先通过摘要过滤出相关文档，接着只在这个相关群体内进行搜索。","layout_right_offset":{"x":32,"y":-24}},"children":[]}]},{"data":{"id":"d403gzlluu80","created":1725716578359,"text":"混合检索","layout_right_offset":{"x":61.999999076128006,"y":42.99999935925004}},"children":[{"data":{"id":"d403ijox3z40","created":1725716700460,"text":"向量索引 + 关键词索引"},"children":[]}]},{"data":{"id":"d403ksum7hc0","created":1725716877123,"text":"重排序","layout_right_offset":{"x":54.999999180436134,"y":56.999999150633926}},"children":[{"data":{"id":"d403t2e52og0","created":1725717524808,"text":"重排序模型（re-ranking model）将用户提出的 query 和上下文作为输入，直接输出 similarity scores "},"children":[]}]}]},{"data":{"id":"d3wa5wcsbzk0","created":1725329217233,"text":"向量数据库","layout_mind_offset":{"x":622.0000013411045,"y":829.9999979138374}},"children":[{"data":{"id":"d3waolrmbt40","created":1725330683104,"text":"faiss","layout_right_offset":{"x":280,"y":-2}},"children":[{"data":{"id":"d3wkt2k5p6w0","created":1725359244214,"text":"倒排索引 Inverted File Index","layout_right_offset":{"x":305,"y":85},"expandState":"expand"},"children":[{"data":{"id":"d3wl5py27bc0","created":1725360235491,"text":"提前将数据库使用k-means聚类算法划分为多个partition，每个partition中包含有对应的feature vectors，同时，每个partition还有对应的centroid，用来决定该partition是应该被穷举搜索，还是被忽略。","layout_right_offset":{"x":1408,"y":-35}},"children":[]}]},{"data":{"id":"d3wimgtas9k0","created":1725353084473,"text":"乘积量化 Product Quantizer","layout_right_offset":{"x":359,"y":-78}},"children":[{"data":{"id":"d3wkfqzgips0","created":1725358200284,"text":"压缩特征库，分块聚类，通过 centroid id 编码","layout_right_offset":{"x":534,"y":-29}},"children":[]}]}]}]},{"data":{"id":"d3vlyw2r2lc0","created":1725260961439,"text":"CoT","layout_mind_offset":{"x":882.0000001788139,"y":890.9999978244305}},"children":[{"data":{"id":"d3vmwq8x2g00","created":1725263613133,"text":"Prompt Construction"},"children":[{"data":{"id":"d3vn3j8ujyo0","created":1725264146440,"text":"Manual Prompting "},"children":[]},{"data":{"id":"d3vn3mv28ig0","created":1725264154314,"text":"Automatic Prompting "},"children":[]},{"data":{"id":"d3vn3n65pl40","created":1725264154985,"text":"Semi-automatic Prompting "},"children":[]}]},{"data":{"id":"d3vmwvrgs400","created":1725263625138,"text":"Topological Variants","layout_right_offset":{"x":2,"y":34}},"children":[{"data":{"id":"d3vn4x71e9s0","created":1725264255170,"text":"Chain"},"children":[]},{"data":{"id":"d3vn50bkh2w0","created":1725264261974,"text":"Tree"},"children":[]},{"data":{"id":"d3vn50lxksw0","created":1725264262601,"text":"Graph"},"children":[]}]},{"data":{"id":"d3vnc0r1ck80","created":1725264811459,"text":"Enhancement Methods ","layout_right_offset":{"x":16,"y":76}},"children":[{"data":{"id":"d3vnc4u8z0w0","created":1725264820360,"text":"verify and refine "},"children":[]},{"data":{"id":"d3vnc5j9vfk0","created":1725264821873,"text":"question decomposition "},"children":[]},{"data":{"id":"d3vnc5svoqw0","created":1725264822454,"text":"knowledge enhancement  "},"children":[]},{"data":{"id":"d3vndaz4cb40","created":1725264912079,"text":"self-ensemble "},"children":[]},{"data":{"id":"d3vndohh5l40","created":1725264941487,"text":"efficient reasoning "},"children":[]}]}]},{"data":{"id":"d3sap61g3rs0","created":1724924487407,"text":"OpenCompass","layout_mind_offset":{"x":609,"y":1010}},"children":[]},{"data":{"id":"d3vqaaodw3c0","created":1725273139667,"text":"Incremental Learning","layout_mind_offset":{"x":640.9999999254942,"y":856.9999992251396}},"children":[]}]},"template":"default","theme":"fresh-blue","version":"1.4.33"}